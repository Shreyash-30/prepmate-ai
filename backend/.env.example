# ============================================================================
# BACKEND LOCAL ENVIRONMENT OVERRIDES
# ============================================================================
# This file is OPTIONAL and FOR LOCAL DEVELOPMENT ONLY
# Copy this to .env and add any backend-specific overrides
# 
# The system will first load from the CENTRAL .env file at project root,
# then apply any overrides from this file.
#
# See the central .env.example at ../env.example for all available options
# ============================================================================

# Backend-Specific Overrides (optional)
# PORT=5000
# NODE_ENV=development
# MONGO_URI=mongodb://localhost:27017/prepmate-ai
# JWT_SECRET=your-secret-here


# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
# Frontend application URL (for CORS and WebSocket)
CLIENT_URL=http://localhost:8080

# API prefix for all REST endpoints
API_PREFIX=/api

# ============================================================================
# REDIS CONFIGURATION (Required for Bull Queue & Caching)
# ============================================================================
# Redis server hostname
REDIS_HOST=localhost

# Redis server port
REDIS_PORT=6379

# Redis password (leave empty if no authentication required)
REDIS_PASSWORD=

# ============================================================================
# ML SERVICE INTEGRATION
# ============================================================================
# Base URL for Python FastAPI ML service
# Must include the /ai/ml path for submission intelligence endpoints
# Local: http://localhost:8000/ai/ml
# Production: https://ml-service.example.com/ai/ml
ML_SERVICE_URL=http://localhost:8000/ai/ml

# ============================================================================
# QUEUE CONFIGURATION
# ============================================================================
# Enable/disable Bull queue for async submission processing
# Note: Requires Redis server running on REDIS_HOST:REDIS_PORT
# Disable if Redis is not available (use 'false' or 'disabled')
# Values: true, false, disabled
ENABLE_SUBMISSION_QUEUE=disabled

# Number of concurrent jobs to process from the queue
# Adjust based on server capacity (higher = more parallel processing)
QUEUE_CONCURRENCY=5

# Queue job timeout in milliseconds
QUEUE_JOB_TIMEOUT=30000

# ============================================================================
# AUTOMATION SCHEDULERS CONFIGURATION
# ============================================================================
# Enable/disable individual automation schedulers
# Values: true, false

# Daily Adaptive Planner - Generates next-day tasks based on weakness & revisions
DAILY_PLANNER_ENABLED=true

# Retention Scheduler - Updates spaced repetition schedule, creates urgent revision tasks
RETENTION_SCHEDULER_ENABLED=true

# Weekly Readiness Recompute - Calculates overall readiness trends
WEEKLY_READINESS_ENABLED=true

# Weekly Compliance Tracking - Aggregates task completion metrics
WEEKLY_COMPLIANCE_ENABLED=true

# ============================================================================
# SCHEDULER CRON EXPRESSIONS
# ============================================================================
# Cron format: "minute hour day-of-month month day-of-week"
# All times are in UTC (adjust for your timezone)
#
# Common patterns:
#   0 0 * * *     = Daily at 00:00 UTC
#   0 23 * * *    = Daily at 23:00 UTC
#   0 2 * * 0     = Weekly Sunday at 02:00 UTC
#   0 3 * * 1     = Weekly Monday at 03:00 UTC
#
# To convert UTC to your timezone and adjust accordingly

# Daily at midnight UTC - Generates adaptive tasks for the next day
DAILY_PLANNER_CRON=0 0 * * *

# Daily at 23:00 UTC - Updates revision schedules before sleep
RETENTION_SCHEDULER_CRON=0 23 * * *

# Weekly Sunday at 02:00 UTC - Recomputes readiness scores and trends
WEEKLY_READINESS_CRON=0 2 * * 0

# Weekly Monday at 03:00 UTC - Generates weekly compliance reports
WEEKLY_COMPLIANCE_CRON=0 3 * * 1

# ============================================================================
# WEBSOCKET CONFIGURATION
# ============================================================================
# Enable/disable real-time WebSocket updates
ENABLE_WEBSOCKET=true

# WebSocket reconnection timeout (milliseconds)
WEBSOCKET_RECONNECT_TIMEOUT=5000

# ============================================================================
# SYNC SERVICE CONFIGURATION
# ============================================================================
# Enable/disable scheduled sync with external platforms (e.g., LeetCode)
ENABLE_SCHEDULED_SYNC=true

# Sync frequency in cron expression (default: every 6 hours)
SYNC_SCHEDULE_CRON=0 */6 * * *

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
# Log level for application
# Values: debug, info, warn, error
LOG_LEVEL=info

# Optional: Enable detailed logs for debugging
DEBUG=false

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# IMPORTANT: Different deployment scenarios require different configurations
#
# DEVELOPMENT (localhost):
#   - Set NODE_ENV=development
#   - Use localhost URIs for all services
#   - Use weak JWT_SECRET (will see warnings)
#   - Schedulers can run frequently for testing
#
# STAGING (internal testing):
#   - Set NODE_ENV=staging
#   - Use staging database and ML service URLs
#   - Generate strong JWT_SECRET
#   - Enable all schedulers with slightly delayed CRONs
#
# PRODUCTION (live users):
#   - Set NODE_ENV=production
#   - Use strong passwords and secrets everywhere
#   - Use production database with backups enabled
#   - Use production ML service URL with load balancing
#   - Adjust CRON expressions for your user timezone
#   - Monitor queue and scheduler logs closely
#   - Enable comprehensive monitoring/alerting
#
# TIMEZONE ADJUSTMENT:
#   UTC times above assume UTC-aware scheduling. To adjust for your timezone:
#   Example for US EST (UTC-5):
#     - Add 5 hours to UTC time
#     - 00:00 UTC â†’ 05:00 EST
#   Use: https://www.epochconverter.com/ for reference
#
# QUEUE TUNING:
#   - Increase QUEUE_CONCURRENCY if you have spare CPU/memory
#   - Decrease if experiencing timeout errors
#   - Monitor Redis memory usage
#
# ML SERVICE HEALTH:
#   - Ensure ML service is running and accessible
#   - Test with: curl http://localhost:8000/health
#   - Check ML service logs for integration issues
